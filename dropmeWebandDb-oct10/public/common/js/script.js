function get_hostname_from_url(e){return e.match(/:\/\/(.[^/]+)/)[1]}
function trim(e){return e.toString().replace(/^\s+|\s+$/,"")}
function myXMLHttpRequest(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}
if(!e&&"undefined"!=typeof XMLHttpRequest)try{var e=new XMLHttpRequest}catch(r){var e=!1}
return e}
function loadurl(e,r){var t;if(xmlhttp||(xmlhttp=new myXMLHttpRequest),xmlhttp&&(xmlht=new myXMLHttpRequest))try{xmlht.open("POST",e,!0),xmlht.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlht.send(""),errormatch=new RegExp("^ERROR:"),xmlht.onreadystatechange=function(){if(4==xmlht.readyState)
if(t=xmlht.responseText,"ca"==r){if("F"!=t)return void(document.getElementById("ca").innerHTML="");document.getElementById(r).innerHTML=language.captcha_invalid}else"deal_permalink"==r?document.getElementById(r).value=trim(t):document.getElementById(r).innerHTML="uemailavilable"==r?trim(t):"uphoneavilable"==r?trim(t):t}}catch(a){}
return t}
function com_amount(){var e=document.getElementById("taxi1").value,r=document.getElementById("trip1").value;commission=0,totaltrips=e*r,permonth=30*totaltrips;var t=parseFloat(permonth).toFixed(2);document.getElementById("amount").value=t}
function hide_req(){$(".popup_block").hide(),location.reload()}
function validates(){for(var e=document.home_contact.name.value,r=document.home_contact.email.value,t=b=0,a=r.indexOf("@"),o=r.lastIndexOf("."),n="!#$%^&*()+=[]\\';,/{}|\":<>?",i=0;i<document.home_contact.email.value.length;i++)
if(-1!=n.indexOf(document.home_contact.email.value.charAt(i)))return $("#email_error").html("Please Remove Special Characters"),!1;return""==e?$("#name_error").html("Please enter: Name"):($("#name_error").html(""),b=2),""==r?$("#email_error").html("Please enter: Email Id"):1>a||a+2>o||o+2>=r.length?$("#email_error").html("Invalid Email"):($("#email_error").html(""),t=6),6==t&&2==b?(document.home_contact.submit(),!0):!1}
function show_driver(){$("#dri").show(),$("#pass").hide(),$("#rel").hide(),$("#adm").hide(),$("#efea").hide(),$("#dis-patcher").hide(),$("#driver").addClass("active"),$("#passenger").removeClass("active"),$("#admin").removeClass("active"),$("#release").removeClass("active"),$("#efeature").removeClass("active"),$("#dispatcher").removeClass("active")}
function show_dispatcher(){$("#dri").hide(),$("#pass").hide(),$("#rel").hide(),$("#adm").hide(),$("#efea").hide(),$("#dis-patcher").show(),$("#driver").removeClass("active"),$("#passenger").removeClass("active"),$("#admin").removeClass("active"),$("#release").removeClass("active"),$("#efeature").removeClass("active"),$("#dispatcher").addClass("active")}
function show_passenger(){$("#dri").hide(),$("#pass").show(),$("#rel").hide(),$("#adm").hide(),$("#efea").hide(),$("#dis-patcher").hide(),$("#driver").removeClass("active"),$("#passenger").addClass("active"),$("#admin").removeClass("active"),$("#release").removeClass("active"),$("#efeature").removeClass("active"),$("#dispatcher").removeClass("active")}
function show_admin(){$("#dri").hide(),$("#pass").hide(),$("#rel").hide(),$("#adm").show(),$("#efea").hide(),$("#dis-patcher").hide(),$("#driver").removeClass("active"),$("#passenger").removeClass("active"),$("#admin").addClass("active"),$("#release").removeClass("active"),$("#efeature").removeClass("active"),$("#dispatcher").removeClass("active")}
function show_feature(){$("#dri").hide(),$("#pass").hide(),$("#rel").hide(),$("#adm").hide(),$("#efea").show(),$("#dis-patcher").hide(),$("#driver").removeClass("active"),$("#passenger").removeClass("active"),$("#admin").removeClass("active"),$("#release").removeClass("active"),$("#efeature").addClass("active"),$("#dispatcher").removeClass("active")}
function show_release(){$("#dri").hide(),$("#pass").hide(),$("#adm").hide(),$("#rel").show(),$("#efea").hide(),$("#dis-patcher").hide(),$("#driver").removeClass("active"),$("#passenger").removeClass("active"),$("#admin").removeClass("active"),$("#release").addClass("active"),$("#efeature").removeClass("active"),$("#dispatcher").removeClass("active")}
function resp_scr(e){"efeature"==e?show_feature():"passenger"==e?show_passenger():"release"==e?show_release():"driver"==e?show_driver():"admin"==e?show_admin():"dispatcher"==e?show_dispatcher():"faq"==e&&(window.location.href="/faq.html")}
function validate_signup(){var e=$("#lname").val(),r=$("#salutation").val(),t=$("#name").val(),a=$("#email").val(),o=$("#phone").val(),n=$("#address").val(),i=$("#creditcard_no").val(),l=$("#creditcard_no").val().length,s=$("#creditcard_cvv").val(),c=$("#expDateMonth").val(),d=$("#expDateYear").val(),m=new Date,u=m.getMonth()+1,_=m.getFullYear();if(""==t||""==e||""==r||""==a||""==o||""==n||""==i||""==s||""==c||""==d){valid=!0;var h=/^([\w-\.+]+@([\w-]+\.)+[\w-]{2,4})?$/,p=/^[0-9]+$/;return""==r?($("#salutation_error").html(language.enter_salutation),document.signup.salutation.focus(),!1):""==t?($("#salutation_error").html(""),$("#name_error").html(language.enter_firstname),document.signup.name.focus(),!1):""==e?($("#name_error").html(""),$("#lname_error").html(language.enter_lastname),document.signup.lname.focus(),!1):""==a?($("#name_error").html(""),$("#email_error").html(language.enter_email),document.signup.email.focus(),!1):h.test(a)?""==o?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(language.enter_phonenumaber),document.signup.phone.focus(),!1):p.test(o)?""==n?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(language.enter_address),document.signup.address.focus(),!1):""==i?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(language.enter_credit_card),document.signup.creditcard_no.focus(),!1):p.test(i)?9>l?($("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(language.card_min_length),document.signup.creditcard_no.focus(),!1):l>16?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(language.card_max_length),document.signup.creditcard_no.focus(),!1):""==s?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(language.enter_cvv),document.signup.creditcard_cvv.focus(),!1):p.test(s)?""==c?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(""),$("#creditcard_cvv_error").html(language.enter_expiry_month),document.signup.creditcard_cvv.focus(),!1):""==d?($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(""),$("#expirydate_error").html(""),$("#expirydate_error").html(language.enter_expiry_year),document.signup.creditcard_cvv.focus(),!1):!1:($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(language.number_only),document.signup.creditcard_cvv.focus(),!1):($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(language.number_only),document.signup.creditcard_no.focus(),!1):($("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(language.numeric_only),document.signup.phone.focus(),!1):($("#name_error").html(""),$("#email_error").html(language.invalidemail),document.signup.email.focus(),!1)}
if(u>c&&d==_)return $("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(""),$("#expirydate_error").html(language.invalid_expiry_date),document.signup.creditcard_cvv.focus(),!1;$("#name_error").html(""),$("#email_error").html(""),$("#phone_error").html(""),$("#address_error").html(""),$("#creditcard_no_error").html(""),$("#creditcard_cvv_error").html(""),$("#expirydate_error").html(""),$("#customer_error").show();var v=SrcPath+"passengers/check_signup_fields/?email="+a+"&creditcard_no="+i+"&creditcard_cvv="+s+"&expdatemonth="+c+"&expdateyear="+d+"&phone="+o;jQuery.ajax({url:v,success:function(l){var m=l.split("~"),u=1,_=1,h=1;if(1==m[0]&&($("#email_error").html("Email ID Already Exist"),u=0),-1==m[1]&&($("#creditcard_no_error").html(language.invalid_credicard),_=0),1==m[2]&&($("#phone_error").html(language.mobile_exists),h=0),1!=u||1!=_||1!=h)return $("#customer_error").hide(),!1;$("#customer_error").show();var p=SrcPath+"passengers/signup/";$.post(p,{email:a,creditcard_no:i,creditcard_cvv:s,expdatemonth:c,expdateyear:d,phone:o,name:t,lastname:e,salutation:r,address:n},function(){$("#customer_error").hide(),window.location=SrcPath+"passengers/signup_success/"})}})}
function validate_customersignup(){var e=$("#customer_name").val(),r=$("#customer_lname").val(),t=$("#customer_salutation").val(),a=$("#customer_email").val(),o=$("#customer_phone").val(),n=$("#referral_code").val(),i=$("#customer_address").val(),l=$("#customer_creditcard_no").val(),s=$("#customer_creditcard_cvv").val(),c=$("#customer_expDateMonth").val(),d=$("#customer_expDateYear").val(),m=new Date,u=("0"+(m.getMonth()+1)).slice(-2),_=m.getFullYear();if(""==e||""==r||""==t||""==a||""==o||""==i||""==l||""==s||""==c||""==d){valid=!0;var h=/^([\w-\.+]+@([\w-]+\.)+[\w-]{2,4})?$/,p=/^[0-9]+$/;return""==t?($("#customer_salutation_error").html(language.enter_salutation),document.customersignup.salutation.focus(),!1):""==e?($("#customer_salutation_error").html(""),$("#customer_name_error").html(language.enter_firstname),document.customersignup.name.focus(),!1):""==r?($("#customer_salutation_error").html(""),$("#customer_name_error").html(""),$("#customer_lname_error").html(language.enter_lastname),document.customersignup.lname.focus(),!1):""==a?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(language.enter_email),document.customersignup.email.focus(),!1):h.test(a)?""==o?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(language.enter_phonenumaber),document.customersignup.phone.focus(),!1):p.test(o)?""==i?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(language.enter_address),document.customersignup.address.focus(),!1):""==l?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(language.enter_credit_card),document.customersignup.creditcard_no.focus(),!1):p.test(l)?""==s?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(language.enter_cvv),document.customersignup.creditcard_cvv.focus(),!1):p.test(s)?""==c?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(""),$("#customer_creditcard_cvv_error").html(language.enter_expiry_month),document.customersignup.creditcard_cvv.focus(),!1):""==d?($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(""),$("#customer_expirydate_error").html(""),$("#customer_expirydate_error").html(language.enter_expiry_year),document.customersignup.creditcard_cvv.focus(),!1):!1:($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(language.number_only),document.customersignup.creditcard_cvv.focus(),!1):($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(language.number_only),document.customersignup.creditcard_no.focus(),!1):($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(language.numeric_only),document.customersignup.phone.focus(),!1):($("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(language.invalidemail),document.customersignup.email.focus(),!1)}
if(u>c&&_>=d)return $("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(""),$("#customer_expirydate_error").html(language.invalid_expiry_date),document.customersignup.creditcard_cvv.focus(),!1;$("#customer_name_error").html(""),$("#customer_lname_error").html(""),$("#customer_salutation_error").html(""),$("#customer_email_error").html(""),$("#customer_phone_error").html(""),$("#customer_address_error").html(""),$("#customer_creditcard_no_error").html(""),$("#customer_creditcard_cvv_error").html(""),$("#customer_expirydate_error").html(""),$("#customer_error1").show();var v=SrcPath+"passengers/check_signup_fields/?email="+a+"&creditcard_no="+l+"&creditcard_cvv="+s+"&expdatemonth="+c+"&expdateyear="+d+"&phone="+o+"&referral_code="+n;jQuery.ajax({url:v,success:function(m){var u=m.split("~"),_=1,h=1,p=1,v=1;1==u[0]&&($("#customer_email_error").html(language.emailexists),$("#customer_error").html(""),_=0),0==u[1]&&($("#customer_creditcard_no_error").html(language.invalid_credicard),$("#customer_error").html(""),h=0),1==u[2]&&($("#customer_phone_error").html(language.mobile_exists),$("#customer_error").html(""),p=0),0==u[3]&&($("#customer_referral_error").html(language.enter_referralcode),$("#customer_error").html(""),v=0);var f=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,g=1,y=/^[0-9]+$/,x=1;if(!f.test(a))return $("#customer_error1").html(""),$("#customer_email_error").html(language.invalid_email),document.customersignup.email.focus(),g=0,!1;if(!y.test(o))return $("#customer_error1").html(""),$("#customer_phone_error").html(language.numeric_only),document.customersignup.phone.focus(),x=0,!1;if(1!=_||1!=h||1!=p||1!=g||1!=v||1!=x)return $("#customer_error1").hide(),!1;$("#customer_error1").show();var w=SrcPath+"passengers/signup/";$.post(w,{email:a,creditcard_no:l,creditcard_cvv:s,expdatemonth:c,expdateyear:d,phone:o,name:e,lastname:r,salutation:t,address:i,referral_code:n},function(){$("#customer_error1").hide(),window.location=SrcPath+"passengers/signup_success/"})}})}
function validatelogin(){var e=document.login.lphone.value,r=document.login.password.value;if(""==e||""==r){valid=!0;var t=/^[1-9]{1}[0-9]{9}$/;if(""==e)return $("#surname_error").hide(),$("#lphone_error").html("Please enter the Phone"),document.login.lphone.focus(),!1;if(!t.test(e))return $("#lphone_error").html("Please enter number only"),document.login.lphone.focus(),!1;if(!e.length>=10)return IsMobileNumber(e),$("#dphone_error").html("Invalid Phone Number"),document.login.lphone.focus(),!1;if(""==r)return $("#lphone_error").html(""),$("#pwd_error").html("Please enter the password"),document.login.password.focus(),!1}else{$("#pwd_error").html("");var a;a=$("#remember").is(":checked")?"yes":"no",$("#p_error").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />');var o=$("#isbooking").val();if(1==o)var n=$("#current_location").val(),i=$("#drop_location").val(),l=$("#no_passengers").val(),s=$("#timepicker1").val(),c=$("#d_id").val(),d="",m="",u=SrcPath+"passengers/login/?phone="+e+"&password="+r+"&remember="+a+"&c_location="+n+"&d_location="+i+"&n_passengers="+l+"&timepicker1="+s+"&driver_id="+c+"&pickupdrop="+d+"&waitingtime="+m+"&isbooking="+o;else var u=SrcPath+"passengers/login/?phone="+e+"&password="+r+"&remember="+a+"&isbooking="+o;$.post(u,function(e){return 1!=e?-1==e?($("#lphone").html(""),$("#pwd").html(""),$("#p_error").html("Your account has been blocked.Contact Administrator."),!1):-2==e?($("#lphone").html(""),$("#pwd").html(""),$("#p_error").html("Your account not yet activated."),!1):2==e?($("#lphone_error").html("Phone Number not exist."),$("#p_error").html(""),!1):($("#p_error").html("Please check your login details"),!1):($("#lphone").html(""),$("#pwd").html(""),$("#passenger_id").val("<?php echo $_SESSION['userid'];?>"),$("input[type=button]").each(function(){var e=$(this).attr("onclick"),r=String(e).split("(");if("showpopup"==r[0]){var t=$(this).attr("onclick"),a=String(t).split("showpopup"),o=a.slice(1),n="booknow"+o;$(this).attr("onclick",n)}}),void(1==o?$(document).ready(function(){$("#sign_up").trigger("close"),$("#c_location").text(n),$("#d_location").text(i),$("#n_passengers").text(l),$("#driver_id").val(c),$("#pickuptime").text(s),$("#booknow").lightbox_me({centered:!0,onLoad:function(){$("#booknow").find("input:first").focus()}}),event.preventDefault()}):document.location.href=SrcPath+"passengers/dashboard"))})}}
function phone_validatelogin(){var e=$("#popup_lphone").val(),r=$("#popup_lphone").val().length,t=$("#popup_creditcard_number").val(),a=$("#popup_creditcard_number").val().length,o=$("#popup_creditcard_cvv").val(),n=$("#expdatemonth").val(),i=$("#expdateyear").val();valid=!0;var l=/^[0-9]+$/,s=new Date,c=s.getMonth()+1,d=s.getFullYear();if(""==e)return $("#popup_lphone_error").html("Please enter the Phone"),document.phone_no.lphone.focus(),!1;if(!l.test(e))return $("#popup_lphone_error").html("Please enter numeric characters only"),document.phone_no.lphone.focus(),!1;if(8>=r)return $("#popup_lphone_error").html("Invalid Phone Number"),document.phone_no.lphone.focus(),!1;if(""==t)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html("Please enter the Credit Card Number"),document.phone_no.popup_creditcard_no.focus(),!1;if(!l.test(t))return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html("Please enter the Number only"),document.phone_no.popup_creditcard_no.focus(),!1;if(9>a)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html("creditcard number must be at least 9 characters long"),document.phone_no.popup_creditcard_no.focus(),!1;if(a>16)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html("creditcard no must not exceed 16 characters long"),document.phone_no.popup_creditcard_no.focus(),!1;if(""==o)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html("Please enter the Credit Card CVV Number"),document.phone_no.popup_creditcard_cvv.focus(),!1;if(!l.test(o))return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html("Please enter the Number only"),document.phone_no.popup_creditcard_cvv.focus(),!1;if(""==n)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html(""),$("#popup_customer_expirydate_error").html("Please select the Credit Card Expiry Month"),document.phone_no.expdatemonth.focus(),!1;if(""==i)return $("#popup_lphone_error").html(""),$("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html(""),$("#popup_customer_expirydate_error").html("Please select the Credit Card Expiry Year"),document.phone_no.expdateyear.focus(),!1;if(c>n&&i==d)return $("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html(""),$("#popup_customer_expirydate_error").html("Month and Year must be greater than the current month and year"),document.phone_no.creditcard_cvv.focus(),!1;$("#popup_lphone_error").html(""),$("#popup_creditcard_number_error").html(""),$("#popup_customer_creditcard_cvv_error").html(""),$("#popup_customer_expirydate_error").html(""),$("#customer_error_phone").show();var m=SrcPath+"passengers/check_popup_fields/?creditcard_no="+t+"&creditcard_cvv="+o+"&expdatemonth="+n+"&expdateyear="+i+"&phone="+e;jQuery.ajax({url:m,success:function(r){var a=r.split("~"),l=1,s=1;if(-1==a[0]&&($("#popup_creditcard_number_error").html("Please Enter Valid Credit Card Number"),l=0),1==a[1]&&($("#popup_lphone_error").html("Phone Number Already Exist"),s=0),1!=l||1!=s)return $("#customer_error_phone").hide(),!1;$("#customer_error_phone").show();var c=SrcPath+"passengers/phonenumber/";$.post(c,{popup_creditcard_no:t,popup_creditcard_cvv:o,expdatemonth:n,expdateyear:i,lphone:e},function(){$("#customer_error1").hide(),window.location=SrcPath+"passengers/fb_update_success/"})}})}
function customer_validatelogin(){var e=document.customerlogin.lphone.value,r=document.customerlogin.password.value;if(""==e||""==r){valid=!0;var t=/^[1-9]{1}[0-9]{9}$/;if(""==e)return $("#surname_error").hide(),$("#customer_lphone_error").html("Please enter the Phone"),document.login.lphone.focus(),!1;if(!t.test(e))return $("#customer_lphone_error").html("Please enter number only"),document.login.lphone.focus(),!1;if(!e.length>=10)return IsMobileNumber(e),$("#customer_dphone_error").html("Invalid Phone Number"),document.login.lphone.focus(),!1;if(""==r)return $("#customer_lphone_error").html(""),$("#customer_pwd_error").html("Please enter the password"),document.login.password.focus(),!1}else{$("#customer_pwd_error").html("");var a;a=$("#customer_remember").is(":checked")?"yes":"no",$("#customer_p_error").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />');var o=$("#customer_isbooking").val();if(1==o)var n=$("#current_location").val(),i=$("#drop_location").val(),l=$("#no_passengers").val(),s=$("#timepicker1").val(),c=$("#customer_d_id").val(),d="",m="",u=SrcPath+"passengers/login/?phone="+e+"&password="+r+"&remember="+a+"&c_location="+n+"&d_location="+i+"&n_passengers="+l+"&timepicker1="+s+"&driver_id="+c+"&pickupdrop="+d+"&waitingtime="+m+"&isbooking="+o;else var u=SrcPath+"passengers/login/?phone="+e+"&password="+r+"&remember="+a+"&isbooking="+o;$.post(u,function(e){return 1!=e?-1==e?($("#customer_lphone").html(""),$("#customer_pwd").html(""),$("#customer_p_error").html("Your account has been blocked.Contact Administrator."),!1):-2==e?($("#customer_lphone").html(""),$("#customer_pwd").html(""),$("#customer_p_error").html("Your account not yet activated."),!1):2==e?($("#customer_lphone_error").html("Phone Number not exist."),$("#customer_p_error").html(""),!1):($("#customer_p_error").html("Please check your login details"),!1):($("#csutomer_lphone").html(""),$("#customer_pwd").html(""),$("#passenger_id").val("<?php echo $_SESSION['userid'];?>"),$("input[type=button]").each(function(){var e=$(this).attr("onclick"),r=toString(e).split("(");if("showpopup"==r[0]){var t=$(this).attr("onclick"),a=toString(t).split("showpopup"),o=a.slice(1),n="booknow"+o;$(this).attr("onclick",n)}}),void(1==o?$(document).ready(function(){$("#sign_up").trigger("close"),$("#c_location").text(n),$("#d_location").text(i),$("#n_passengers").text(l),$("#driver_id").val(c),$("#pickuptime").text(s),$("#booknow").lightbox_me({centered:!0,onLoad:function(){$("#booknow").find("input:first").focus()}}),event.preventDefault()}):document.location.href=SrcPath+"passengers/dashboard"))})}}
function validatedriverlogin(){var e=document.driverlogin.dphone.value,r=document.driverlogin.password.value;if(""==e||""==r){if(valid=!0,""==e)return $("#dphone_error").html("Please enter the phone"),document.driverlogin.dphone.focus(),!1;if(""==r)return $("#dphone_error").html(""),$("#dpwd_error").html("Please enter the password"),document.driverlogin.password.focus(),!1}else{$("#dphone_error").html(""),$("#dpwd_error").html("");var t;t=$("#dremember").is(":checked")?"yes":"no",$("#d_error").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />');var a=SrcPath+"driver/login/?phone="+e+"&password="+r+"&remember="+t;$.post(a,function(e){return 1!=e?-1==e?($("#d_error").html("User Blocked"),!1):2==e?($("#dphone_error").html("Phone Number does not exist"),$("#d_error").html(""),!1):3==e?($("#dphone_error").html("Please enter number only"),$("#d_error").html(""),!1):($("#d_error").html("Please check your login details"),!1):($("#dphone").html(""),$("#password").html(""),void(document.location.href=SrcPath+"driver/dashboard"))})}}
function validate_tell_to_friend(){var e=document.tell_to_friend.temail.value,r=document.tell_to_friend.friend_message.value;valid=!0;var t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(""==e||""==r){if(""==e)return $("#temail_error").html("Please enter the Email"),document.tell_to_friend.temail.focus(),!1;if(""==r)return $("#friend_message_error").html("Please enter the Message"),document.tell_to_friend.friend_message.focus(),!1}else{if(!t.test(e))return $("#temail_error").html("Please enter valid Email"),document.tell_to_friend.temail.focus(),!1;$("#temail_error").html(""),$("#sub_button").hide(),$("#ajax_load").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />');var a=SrcPath+"passengers/tell_to_friend?email="+e+"&message="+r;$.post(a,function(e){1==e&&($("#temail").html(""),document.location.href=SrcPath+"passengers/dashboard")})}}
function change_status(e,r,t,a,o){var n="";n+="<dl class='dl-horizontal'><dt>Pick Up Location</dt><dd>"+a+"</dd><dt>Drop Location</dt><dd>"+o+"</dd></dl>",n+="<div class='journey_btns'><button class='btn btn-danger' onclick=show_id('waiting_time');show_id('completed_time');>Start the Journey</button>",n+="<br/><br/><div id='waiting_time'><label for='waiting_time_input'>Waiting Time</label><input type='text' id='waiting_time_input'><br/><span><i>(e.g) Enter 2hrs as 2</i></span></div>",n+="<br/><button id='completed_time' class='btn btn-success' onclick=journey_completed('"+e+"','"+a+"','"+o+"');>Journey Completed </button></div>",$("#change_status_div").html(n),$("#change_status").lightbox_me({centered:!0,onLoad:function(){}}),event.preventDefault()}
function show_id(e){$("#"+e).show("fast")}
function hide_id(e){$("#"+e).hide("fast")}
function journey_completed(){var e=$("#passlog_id").val(),r=$("#fromText1").val(),t=$("#toText1").val(),a=new Date,o=(a.getHours(),a.getMinutes(),a.getSeconds(),$("#stopwatch").html()),n="pass_logid="+e+"&from="+r+"&to="+t+"&waiting_time="+o;$.ajax({type:"POST",url:SrcPath+"driver/journey_completed",data:n,cache:!1,dataType:"html",success:function(e){$("#travel_completed").show(),$("#result_status_div").html(e),$("#ongoing_journey").hide()}})}
function insert_transaction(e){var r=$("#distance").val(),t=$("#actual_amount").val(),a=$("#total").val(),o=$("#actual_distance").val(),t=$("#actual_amount").val(),n=$("#waiting_cost").val(),i=$("#waiting_hours").val(),l=$("#passenger_discount").val(),s=$("#account_discount").val(),c=$("#company_tax").val(),d=$("#tripfare").val(),m=$("#remarks").val();if(""!=o&&""!=t){var u="pass_logid="+e+"&distance="+r+"&actual_distance="+o+"&actual_amount="+t+"&tripfare="+d+"&total="+a+"&waiting_cost="+n+"&waiting_hours="+i+"&remarks="+m+"&passenger_discount="+l+"&account_discount="+s+"&company_tax="+c;$.ajax({type:"GET",url:SrcPath+"driver/insert_transaction",data:u,cache:!1,dataType:"html",success:function(){scrollIntoView("completed_trip"),location.reload()}})}else alert("Kindly enter actual distance and actual amount.If no actual distance enter distance,fare as actual distance and actual amount")}
function commentsdetailspopup(e,r,t,a,o,n,i,l){$("#v_driver_name").text(e),$("#v_comments").text(a),$("#rating_driver_id").val(r),$("#log_id").val(t),$("#d_id").val(r);var s=SrcPath+"passengers/getrating/?driver_id="+r+"&log_id="+t;$.post(s,{},function(e){$("#v_inner").fadeOut(),$("#v_inner").html(unescape(e)),$("#v_inner").fadeIn();var r=$(".rating_value").text();$("#rval").val(r)}),$("#details_pop").lightbox_me({centered:!0,onLoad:function(){$("#details_pop").find("input:first").focus();var e=$("#rval").val(),r="http://www.facebook.com/sharer.php?s=100&p[title]=My Ride On-"+o+"&p[summary]=Pick Up Location:"+i+",Drop Location:"+l+",comments:"+a+",Rating:"+e+"&p[url]="+n;$("#fb_id").attr("href",r)}}),event.preventDefault()}
function transactiondetailspopup(e,r,t,a,o){$("#trans_amt").text(t),$("#pay_mode").text(o),$("#transaction_details_pop").lightbox_me({centered:!0,onLoad:function(){$("#transaction_details_pop").find("input:first").focus()}}),event.preventDefault()}
function transactiondetailspopup_card(e,r,t,a,o){$("#transaction_id").text(e),$("#correlation_id").text(r),$("#trans_amt1").text(t),$("#trans_payment_status").text(a),$("#pay_mode").text(o),$("#transaction_details_pop_card").lightbox_me({centered:!0,onLoad:function(){$("#transaction_details_pop_card").find("input:first").focus()}}),event.preventDefault()}
function markfavourite(e,r){var t=SrcPath+"passengers/markfavourite/?log_id="+e+"&mark_status="+r;$.post(t,{},function(){location.reload()})}
function showcommentspopup(e,r,t,a){$("#driver_name").text(e),$("#rating_driver_id").val(r),$("#log_id").val(t),$("#comments").val(a),""!=a&&$("#comments").attr("disabled","disabled");var o=SrcPath+"passengers/getrating/?driver_id="+r+"&log_id="+t;$.post(o,{},function(e){$("#inner").fadeOut(),$("#inner").html(unescape(e)),$("#inner").fadeIn()}),$("#rating_pop").lightbox_me({centered:!0,onLoad:function(){$("#rating_pop").find("input:first").focus()}}),event.preventDefault()}
function showdriverratingpopup(e,r){$("#v_comments").text(r);var t=SrcPath+"driver/viewrate/?rating="+e;$.post(t,{},function(e){$("#inner").fadeOut(),$("#inner").html(unescape(e)),$("#inner").fadeIn()}),$("#details_pop").lightbox_me({centered:!0,onLoad:function(){$("#details_pop").find("input:first").focus()}}),event.preventDefault()}
function saverate(e){var r=$("#rating_driver_id").val(),t=$("#log_id").val();$("#inner").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />');var a=SrcPath+"passengers/rating/?value="+e+"&driver_id="+r+"&log_id="+t;$.post(a,{},function(e){$("#inner").fadeOut(),$("#inner").html(unescape(e)),$("#inner").fadeIn()})}
function savecomments(){var e=$("#rating_driver_id").val(),r=$("#log_id").val(),t="";if(""!=t){var a=SrcPath+"passengers/comments/?driver_id="+e+"&log_id="+r+"&comments="+t;$.post(a,{},function(e){$("#c_result").html(unescape(e)),location.reload()})}else location.reload()}
function ajax_call_notify(e){if(!($("#notify_alert").length>0))return!1;var r=$("#driver_logs").val(),t="value="+r+"&flag="+e;$.ajax({type:"POST",url:SrcPath+"driver/get_driver_notifications",data:t,cache:!1,dataType:"html",success:function(r){0==e&&noty({text:r,type:"confirm",layout:"bottomRight",closeWith:["click"]})}})}
function action_request(e,r){var t="",a="pass_logid="+e+"&status="+r+"&flag="+t;$.ajax({type:"POST",url:SrcPath+"driver/update_driver_status",data:a,cache:!1,dataType:"html",success:function(e){$("#notify_alert").html(e)}})}
function validate_span(e,r,t,a){var o;if(o=$("#"+e).val(),""==o)return $("#"+e).addClass("invalid"),$("#"+e).focus(),!1;var n="pass_logid="+r+"&status="+t+"&field="+o+"&flag="+a;$("#notify_alert").html('<img src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-4.gif" />Your request is being processed...'),$.ajax({type:"GET",url:SrcPath+"driver/set_driver_status",data:n,cache:!1,dataType:"html",success:function(e){$("#notify_alert").html(e)}})}
function load_modules(e,r){var t="limit="+e+"&count="+r;r>e&&(console.log(e),$.ajax({type:"POST",url:SrcPath+"driver/dashboard_ajax",data:t,cache:!1,dataType:"html",success:function(e){$("#comment_ratings_ajax").append(e)}}))}
function show_map(e,r,t,a,o,n,i,l){$("#map-container").show(),$("#map-canvas").show(),document.getElementById("map-container").scrollIntoView(),$("#driverid").val(t),$("#drivername").val(a),$("#location1").val(e),$("#location2").val(r),$("#picklat").val(o),$("#picklon").val(n),$("#droplat").val(i),$("#droplon").val(l),initialize(e),""!=r&&calcRoute(e,r),setInterval(FetchData,2e3)}
function push_notification(e){var r="driver_id="+e;$.ajax({type:"POST",url:SrcPath+"driver/push_notification",data:r,cache:!1,dataType:"html",success:function(e){var r=e,t=r.indexOf("|")+1,a=r.indexOf("|",t),o=r.substring(t,a);o.length>1&&($("#ongoing_journey").show(),$("#current_place").hide(),$("#driver_logs_upcoming").hide(),e=e.substr(o.length+4),$("#on_going_trip_btn").html(o),loadPage()),$("#on_going_trip").html(e);var n=$("#latitude").val(),i=$("#longitude").val();showPosition(n,i)}})}
function cancelTrip(){var e=$("#passlog_id").val(),r="C",t=1,a="pass_logid="+e+"&status="+r+"&flag="+t;$.ajax({type:"POST",url:SrcPath+"driver/update_driver_status",data:a,cache:!1,dataType:"html",success:function(e){$("#notify_alert").html(e)}})}
function show_progress_driver(e){var r="driver_id="+e;$.ajax({type:"POST",url:SrcPath+"driver/show_progress_driver",data:r,cache:!1,dataType:"html",success:function(e){var r=e,t=r.indexOf("|")+1,a=r.indexOf("|",t),o=r.substring(t,a);$("#ongoing_journey").show(),$("#current_place").hide(),$("#driver_logs_upcoming").hide(),e=e.substr(o.length+4),$("#on_going_trip_btn").html(o),loadPage(),console.log(o),scrollIntoView("ongoing_journey")}})}
function pad(e,r){for(var t=""+e;t.length<r;)t="0"+t;return t}
function formatTime(e){var r=parseInt(e/6e3),t=parseInt(e/100)-60*r,a=pad(e-100*t-6e3*r,2);return(r>0?pad(r,2):"00")+":"+pad(t,2)+":"+a}
function scrollIntoView(e){document.getElementById(e).scrollIntoView()}
function driverbreak(e,r){var t="breakstatus="+e+"&driver_break_insert_id="+r;1==e?($("#on_going_trip").html(""),$("#on_going_trip").html('<div id="breakstatus"><select id="interval_type"><option value="S">Taxi Service</option><option value="B">Break</option></select><textarea id="reason"></textarea><br><span class="btn btn-mini btn-warning" onclick=javascript:valdate_text("reason",'+e+");>Submit</span></div>")):$.ajax({type:"POST",url:SrcPath+"driver/update_break_status",data:t,cache:!1,dataType:"html",success:function(e){$("#breakstatus").html(e)}})}
function valdate_text(e,r){var t;if(t=$("#"+e).val(),""==t)return $("#"+e).addClass("invalid"),$("#"+e).focus(),!1;$("#"+e).removeClass("invalid");var a=$("#reason").val(),o=$("#interval_type").val(),n="breakstatus="+r+"&reason="+a+"&interval_type="+o;$.ajax({type:"POST",url:SrcPath+"driver/update_break_status",data:n,cache:!1,dataType:"html",success:function(e){$("#breakstatus").html(e)}})}
function facebookconnect(){location.href,win2=window.open(SrcPath+"passengers/fconnect/",null,"width=750,location=0,status=0,height=500"),checkChild()}
function change_userdetails(e,r){var t=SrcPath+"tdispatch/get_passengerDetails/?field_value="+e+"&field_name="+r;$.post(t,{},function(e){var t=e.split(",");$("#passenger_id").val(t[0]),"firstname"==r?($("#firstname").removeAttr("readonly"),$("#email").val(t[2]),$("#email").attr("readonly","readonly"),$("#phone").val(t[3]),$("#phone").attr("readonly","readonly")):"email"==r?($("#email").removeAttr("readonly"),$("#firstname").val(t[1]),$("#firstname").attr("readonly","readonly"),$("#phone").val(t[3]),$("#phone").attr("readonly","readonly")):"phone"==r&&($("#phone").removeAttr("readonly"),$("#firstname").val(t[1]),$("#firstname").attr("readonly","readonly"),$("#email").val(t[2]),$("#email").attr("readonly","readonly"))})}
function change_userdetails_new(e,r){var t=SrcPath+"taxidispatch/get_passengerDetails_new/?field_value="+e+"&field_name="+r;$.post(t,{},function(u){if(0!=u){var t=u.split(",");$("#passenger_id").val(t[0]),"firstname"==e?($("#passenger_id").val(t[0]),$("#email").val(t[2]),$("#phone").val(t[3]),$("#country_code").val(t[4]),$("#firstname").removeAttr("readonly"),$("#email").attr("readonly","readonly"),$("#phone").attr("readonly","readonly"),(t[4]!='')?$("#country_code").attr("readonly","readonly"):$("#country_code").removeAttr("readonly")):"email"==e?($("#email").removeAttr("readonly"),$("#firstname").val(t[1]),$("#firstname").attr("readonly","readonly"),$("#phone").val(t[3]),$("#phone").attr("readonly","readonly"),$("#country_code").val(t[4]),(t[4]!='')?$("#country_code").attr("readonly","readonly"):$("#country_code").removeAttr("readonly")):"phone"==e&&($("#phone").removeAttr("readonly"),$("#country_code").removeAttr("readonly"),$("#firstname").val(t[1]),$("#firstname").attr("readonly","readonly"),$("#email").val(t[2]),$("#email").attr("readonly","readonly"),$("#country_code").val(t[4]))}})}
function change_userdetails_new_edit(e,r){var t=SrcPath+"taxidispatch/get_passengerDetails_new/?field_value="+e+"&field_name="+r;$.post(t,{},function(t){if(0!=t){var a=t.split(",");$("#passenger_id").val(a[0]),"firstname"==e?($("#edit_firstname").removeAttr("readonly"),$("#edit_passenger_id").val(a[0]),$("#edit_email").val(a[2]),$("#edit_email").attr("readonly","readonly"),$("#edit_phone").val(a[3]),$("#edit_phone").attr("readonly","readonly"),$("#edit_country_code").val(a[4]),(a[4]!='')?$("#edit_country_code").attr("readonly","readonly"):$("#edit_country_code").removeAttr("readonly","readonly")):"email"==e?($("#edit_email").removeAttr("readonly"),$("#edit_firstname").val(a[1]),$("#edit_firstname").attr("readonly","readonly"),$("#edit_phone").val(a[3]),$("#edit_phone").attr("readonly","readonly"),$("#edit_country_code").val(a[4]),(a[4]!='')?$("#edit_country_code").attr("readonly","readonly"):$("#edit_country_code").removeAttr("readonly","readonly")):"phone"==e&&($("#edit_phone").removeAttr("readonly"),$("#edit_firstname").val(a[1]),$("#edit_firstname").attr("readonly","readonly"),$("#edit_email").val(a[2]),$("#edit_email").attr("readonly","readonly"),$("#edit_country_code").val(a[4]),$("#edit_country_code").removeAttr("readonly","readonly"))}})}
function change_accountuserdetails(e,r){var t=SrcPath+"tdispatch/get_passengerDetails/?field_value="+e+"&field_name="+r;$.post(t,{},function(e){var t=e.split(",");$("#passenger_id").val(t[0]),"firstname"==r?($("#account_firstname").removeAttr("readonly"),$("#account_email").val(t[2]),$("#account_email").attr("readonly","readonly"),$("#account_phone").val(t[3]),$("#account_phone").attr("readonly","readonly")):"email"==r?($("#account_email").removeAttr("readonly"),$("#account_firstname").val(t[1]),$("#account_firstname").attr("readonly","readonly"),$("#account_phone").val(t[3]),$("#account_phone").attr("readonly","readonly")):"phone"==r&&($("#account_phone").removeAttr("readonly"),$("#account_firstname").val(t[1]),$("#account_firstname").attr("readonly","readonly"),$("#account_email").val(t[2]),$("#account_email").attr("readonly","readonly"))})}
function change_suggestedlocation(){var e=SrcPath+"tdispatch/get_suggestedlocation/";$.post(e,{},function(e){$("#load_location").html(""),$("#load_location").html(e)})}
function change_suggestedjourney(){var e=SrcPath+"tdispatch/get_suggestedjourney/";$.post(e,{},function(e){$("#load_journey").html(""),$("#load_journey").html(e)})}
function get_groupdetails(e){var r=SrcPath+"tdispatch/getgrouplist/?userid="+e;$.post(r,{},function(e){""!=trim(e)&&($("#show_group").show(),$("#usergroup_list").html(""),$("#usergroup_list").html(e))})}
function change_minfare(e,r){if(""!=e&&"edit"==r){var t=$("#edit_distance_km").val(),a=$("#edit_total_duration_secs").val();(isNaN(t)||""==t)&&(t=0),""==a&&(a=0);var o=$("#edit_cityname").val(),n=$("#edit_city_id").val();calculate_totalfare_flag(t,e,o,n,a)}else{var t=$("#distance_km").val(),a=$("#total_duration_secs").val();(isNaN(t)||""==t)&&(t=0),""==a&&(a=0);var o=$("#cityname").val(),n=$("#city_id").val();calculate_totalfare(t,e,o,n,a)}}
function checkuseremail(e,r){var t=SrcPath+"tdispatch/checkemailuserdetails/?email="+e+"&passenger_id="+r;$.post(t,{},function(e){"N"!=trim(e)?($("#uemailavilable").html(""),$("#uemailavilable").html(e)):$("#uemailavilable").html("")})}
function checkuserphone(e,r){var t=SrcPath+"tdispatch/checkphoneuserdetails/?phone="+e+"&passenger_id="+r;$.post(t,{},function(e){"N"!=trim(e)?($("#uphoneavilable").html(""),$("#uphoneavilable").html(e)):$("#uphoneavilable").html("")})}
function checkdomainname(e){if(0!=trim(e).length&&4<=trim(e).length){loadurl(SrcPath+"company/checkdomain?type="+e,"unameavilable");}}
function check_companyemail(e){0!=trim(e).length&&loadurl(SrcPath+"company/checkemail?type="+e,"unameavilable_email")}
/*function calculate_totalfare(e,r,t,a,o){if(""!=trim(r)&&(""!=trim(t)||""!=trim(a))){var n=SrcPath+"tdispatch/get_citymodel_fare_details/",i="distance_km="+e+"&model_id="+r+"&city_name="+t+"&city_id="+a+"&total_min="+o;$("#min_fare").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"GET",url:n,data:i,cache:!1,async:!0,dataType:"html",success:function(e){var r=e,t=$("#vat_tax").html(),a=(r*t/100).toFixed(2),o=parseFloat(r)+parseFloat(a);o=o.toFixed(2),$("#min_fare").html(o),$("#sub_total").html(o),$("#total_price").html(o),$("#total_fare").val(o),$("#min_fare").removeClass("strike");var n=$("#fixedprice").val();if(""==n){$("#min_fare").removeClass("strike");var i=$("#total_fare").val();$("#total_price").html(i)}else $("#total_price").html(n),$("#min_fare").addClass("strike")}})}}*/

/** Edited By Logeswaran 02-12-2016
 * Tax calculation and added done by tdispatch controller here removed
 */
function calculate_totalfare(e,r,t,a,o){if(""!=trim(r)&&(""!=trim(t)||""!=trim(a))){var n=SrcPath+"tdispatch/get_citymodel_fare_details/",i="distance_km="+e+"&model_id="+r+"&city_name="+t+"&city_id="+a+"&total_min="+o;$("#min_fare").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"GET",url:n,data:i,cache:!1,async:!0,dataType:"html",success:function(e){var r=e,t=$("#vat_tax").html(),a=(r*t/100).toFixed(2);o=r,$("#min_fare").html(o),$("#sub_total").html(o),$("#total_price").html(o),$("#total_fare").val(o),$("#min_fare").removeClass("strike");var n=$("#fixedprice").val();if(""==n){$("#min_fare").removeClass("strike");var i=$("#total_fare").val();$("#total_price").html(i)}else $("#total_price").html(n),$("#min_fare").addClass("strike")}})}}

/*function calculate_totalfare_flag(e,r,t,a,o){if(""!=trim(r)&&(""!=trim(t)||""!=trim(a))){var n=SrcPath+"tdispatch/get_citymodel_fare_details/",i="distance_km="+e+"&model_id="+r+"&city_name="+t+"&city_id="+a+"&total_min="+o;$("#edit_min_fare").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"GET",url:n,data:i,cache:!1,async:!0,dataType:"html",success:function(e){var r=e,t=$("#edit_vat_tax").html(),a=(r*t/100).toFixed(2),o=parseFloat(r)+parseFloat(a);o=o.toFixed(2),$("#edit_min_fare").html(o),$("#edit_sub_total").html(o),$("#edit_total_price").html(o),$("#edit_total_fare").val(o),$("#edit_min_fare").removeClass("strike");var n=$("#edit_fixedprice").val();if(""==n){$("#edit_min_fare").removeClass("strike");var i=$("#edit_total_fare").val();$("#edit_total_price").html(i)}else $("#edit_total_price").html(n),$("#edit_min_fare").addClass("strike")}})}}*/

/** Edited By Logeswaran 02-12-2016
 * Tax calculation and added done by tdispatch controller here removed
 */
function calculate_totalfare_flag(e,r,t,a,o){if(""!=trim(r)&&(""!=trim(t)||""!=trim(a))){var n=SrcPath+"tdispatch/get_citymodel_fare_details/",i="distance_km="+e+"&model_id="+r+"&city_name="+t+"&city_id="+a+"&total_min="+o;$("#edit_min_fare").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"GET",url:n,data:i,cache:!1,async:!0,dataType:"html",success:function(e){var r=e,t=$("#edit_vat_tax").html(),a=(r*t/100).toFixed(2);o=r,$("#edit_min_fare").html(o),$("#edit_sub_total").html(o),$("#edit_total_price").html(o),$("#edit_total_fare").val(o),$("#edit_min_fare").removeClass("strike");var n=$("#edit_fixedprice").val();if(""==n){$("#edit_min_fare").removeClass("strike");var i=$("#edit_total_fare").val();$("#edit_total_price").html(i)}else $("#edit_total_price").html(n),$("#edit_min_fare").addClass("strike")}})}}
function checkpotp(){var e=$("#potp").val(),r=$("#customer_pemail").val(),t=$("#key").val(),a="potp="+e+"&email="+r+"&key="+t;return""==e?($(".errors").html("Please enter the OTP"),!1):($("#submit_otp").hide(),$("#resend_otp").hide(),$("#otp_btn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),void $.ajax({type:"POST",url:SrcPath+"passengers/otpvalidation",data:a,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);return 3==r.status?($("#errors").html(r.message),$("#otp_btn").hide(),$("#submit_otp").show(),$("#resend_otp").show(),!1):2==r.status?($("#errors").html(r.message),$("#otp_btn").hide(),$("#submit_otp").show(),$("#resend_otp").show(),!1):void(4==r.status?window.location=SrcPath:1==r.status&&(window.location=SrcPath))}}))}
function resendpotp(){var e=$("#customer_pemail").val(),r=($("#key").val(),"email="+e);$("#resend_otp").hide(),$("#submit_otp").hide(),$("#errors").hide(),$("#otp_btn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"POST",url:SrcPath+"passengers/resendotp",data:r,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);if(2==r.status)window.location=SrcPath;else{if(3==r.status)return $("#errors").html(r.message),$("#resend_otp").show(),$("#submit_otp").show(),!1;1==r.status&&(window.location=SrcPath)}}})}
function loginresendpotp(){var e=$("#customer_pemail").val(),r=($("#key").val(),"email="+e);$("#resend_otp").hide(),$("#btn_login").hide(),$("#otp_btn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"POST",url:SrcPath+"passengers/resendotp",data:r,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);if(2==r.status)window.location=SrcPath;else{if(3==r.status)return $("#otp_btn").hide(),$("#customer_p_error").html(r.message),$("#resend_otp").css("display","inline"),!1;1==r.status&&(window.location=SrcPath)}}})}
function checkdotp(){var e=$("#dotp").val(),r=$("#demail").val(),t=$("#key").val(),a="dotp="+e+"&email="+r+"&key="+t;return""==e?($(".errors").html("Please enter the OTP"),!1):($("#submit_otp").hide(),$("#resend_otp").hide(),$("#otp_btn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),void $.ajax({type:"POST",url:SrcPath+"driver/otpvalidation",data:a,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);return 3==r.status?($("#errors").html(r.message),$("#otp_btn").hide(),$("#submit_otp").show(),$("#resend_otp").show(),!1):2==r.status?($("#errors").html(r.message),$("#otp_btn").hide(),$("#submit_otp").show(),$("#resend_otp").show(),!1):void(4==r.status?window.location=SrcPath:1==r.status&&(window.location=SrcPath))}}))}
function resenddotp(){var e=$("#demail").val(),r=($("#key").val(),"email="+e);$("#resend_otp").hide(),$("#submit_otp").hide(),$("#otp_btn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"POST",url:SrcPath+"driver/resendotp",data:r,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);if(2==r.status)window.location=SrcPath;else{if(3==r.status)return $("#errors").html(r.message),$("#resend_otp").show(),$("#submit_otp").show(),!1;1==r.status&&(window.location=SrcPath)}}})}
function loginresenddotp(){var e=$("#demail").val(),r=($("#key").val(),"email="+e);$("#resend_dotp").hide(),$("#btn_dlogin").hide(),$("#otp_dbtn").html('<img alt="ajax-loader" src="'+SrcPath+'/public/common/css/img/ajax-loaders/ajax-loader-1.gif" />'),$.ajax({type:"POST",url:SrcPath+"driver/resendotp",data:r,cache:!1,dataType:"html",success:function(e){var r=JSON.parse(e);if(2==r.status)window.location=SrcPath;else{if(3==r.status)return $("#otp_btn").hide(),$("#d_error").html(r.message),$("#resend_otp").css("display","inline"),!1;1==r.status&&(window.location=SrcPath)}}})}
function nospaces(e){e.value.match(/\s/g)&&(e.value=e.value.replace(/\s/g,""))}
$(document).ready(function(){$(".cc").keyup(function(){$(this).val().length==$(this).attr("maxlength")&&$(this).next().focus()}),$(".cal_input_box").focusin(function(){$("input").attr("placeholder","")}),$("#disable").click(function(){$("#disable").attr("disabled",!0)})});var scripts=document.getElementsByTagName("script"),thisScript=scripts[scripts.length-1],thisScriptsSrc=thisScript.src,responseVal,xmlhttp;this.hostname="http://"+get_hostname_from_url(thisScriptsSrc),$(document).ready(function(){$("#info").hide(),$("#info1").hide(),$("#info2").hide(),$("#hpop").click(function(){$("#info").show()}),$("#hpop1").click(function(){$("#info1").show()}),$("#hpop2").click(function(){$("#info2").show()})}),$(document).ready(function(){$("#efea").show(),$("#dri").hide(),$("#pass").hide(),$("#adm").hide(),$("#rel").hide(),$("#efeature").addClass("active"),$("#dis-patcher").hide()}),$(document).ready(function(){$("#messagedisplay")&&($("#messagedisplay").animate({opacity:1},5e3),$("#messagedisplay").fadeOut("slow")),$("#error_messagedisplay")&&($("#error_messagedisplay").animate({opacity:1},5e3),$("#error_messagedisplay").fadeOut("slow"))});var SrcPath=$("#baseurl").val();$(function(){var e=($("#password"),null);$("#pwd,#lphone").keypress(function(r){e=r.keyCode?r.keyCode:r.which,13==e&&validatelogin()}),$("#password,#dphone").keypress(function(r){e=r.keyCode?r.keyCode:r.which,13==e&&validatedriverlogin()})}),$("#customerlogin").keyup(function(e){13==e.which&&customer_validatelogin()}),$("#customersignup").keyup(function(e){13==e.which}),$("#phone_no").keyup(function(e){13==e.which}),ajax_call_notify(0);var myFuncCalls=0;$(window).scroll(function(e){var r=$("#current_count").val(),t=$("#comment_count").val();if(e.preventDefault(),$("#comments_ratings").length>0){var a=$(window).scrollTop();a>=$(document).height()-$(window).height()&&(e.preventDefault(),myFuncCalls+=parseInt(r),load_modules(myFuncCalls,t))}}),$("#taxi_type").change(function(){if(null!=this.value){var e="motor_type="+this.value;$.ajax({type:"POST",url:SrcPath+"find/get_motor_model",data:e,cache:!1,dataType:"html",success:function(e){$("#taxi_model").html(e)}})}});var win2;function check_upcoming_trip_alert()
{var today=new Date();var Y=today.getFullYear(),month=today.getMonth()+1,dateVal=today.getDate(),h=today.getHours(),m=today.getMinutes(),s=today.getSeconds();month=(month<10)?"0"+month:month;dateVal=(dateVal<10)?"0"+dateVal:dateVal;h=(h<10)?"0"+h:h;m=(m<10)?"0"+m:m;s=(s<10)?"0"+s:s;var pickupTime=Y+"-"+month+"-"+dateVal+" "+h+":"+m+":"+s;$.ajax({type:"POST",url:"users/getUpcomingTripAlert",data:"current_local_date="+pickupTime,success:function(data){$("#minutes").html(data);if(data>0){var minutes=$("#minutes").html();if(minutes<=30){setInterval(function(){minutes=minutes-1;if(minutes>0){$("#minutes").html(minutes);}else{$(".upcoming_trip").hide();$("#minutes").html(0);}},1000*60*1);}
$("#upcoming_alert").show();}}});}

$(document).ready(function () {
	$('input').blur(function() {
		var regex = /(<([^>]+)>)/ig;
		var body = $(this).val();
		var result = body.replace(regex, "");
		$(this).val(result);
	});

	$('textarea').blur(function() {
		var regex = /(<([^>]+)>)/ig;
		var body = $(this).val();
		var result = body.replace(regex, "");
		$(this).val(result);
	});

	$('form').submit(function() {
		var attr = $(this).attr('data-form');
		if(attr == 'server-form') {
			$("input[type='submit']", this).val("Please Wait...").attr('disabled', 'disabled');
			$('input[type="text"]').keyup(function() {
				if($(this).val() != '') {
					$('input[type="submit"]').prop('disabled', false);
				}
			});
		}
	});
});
